{"version":3,"sources":["../node_modules/kaios-gaia-l10n/l10n.js"],"names":["window","undefined","L10nError","message","id","loc","this","name","prototype","Object","create","Error","constructor","io","_load","type","url","callback","sync","needParse","xhr","XMLHttpRequest","overrideMimeType","open","responseType","addEventListener","e","target","status","res","response","responseText","JSON","parse","send","load","loadJSON","EventEmitter","getPluralRule","lang","isIn","n","list","indexOf","isBetween","start","end","pluralRules","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","index","af","ak","am","ar","asa","az","be","bem","bez","bg","bh","bm","bn","bo","br","brx","bs","ca","cgg","chr","cs","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fil","fo","fr","fur","fy","ga","gd","gl","gsw","gu","guw","gv","ha","haw","he","hi","hr","hu","ig","ii","is","it","iu","ja","jmc","jv","ka","kab","kaj","kcg","kde","kea","kk","kl","km","kn","ko","ksb","ksh","ku","kw","lag","lb","lg","ln","lo","lt","lv","mas","mg","mk","ml","mn","mo","mr","ms","mt","my","nah","naq","nb","nd","ne","nl","nn","no","nr","nso","ny","nyn","om","or","pa","pap","pl","ps","pt","rm","ro","rof","ru","rwk","sah","saq","se","seh","ses","sg","sh","shi","sk","sl","sma","smi","smj","smn","sms","sn","so","sq","sr","ss","ssy","st","sv","sw","syr","ta","te","teo","th","ti","tig","tk","tl","tn","to","tr","ts","tzm","uk","ur","ve","vi","vun","wa","wae","wo","xh","xog","yo","zh","zu","replace","emit","_listeners","args","Array","slice","call","arguments","shift","typeListeners","i","length","apply","listener","push","removeEventListener","pos","splice","PropertiesParser","patterns","entryIds","init","comment","entity","multiline","unicode","entries","controlChars","placeables","ctx","source","ast","match","line","test","trim","entityMatch","parseEntity","_emitter","value","key","substr","substring","attr","nameElements","split","setEntityValue","unescapeString","rawValue","v","parseString","$i","$x","parseIndex","$v","str","chunks","complexStr","placeablesCount","t","lastIndexOf","token","unescape","KNOWN_MACROS","MAX_PLACEABLE_LENGTH","rePlaceables","nonLatin1","FSI","PDI","createAttribute","node","env","dirty","format","rv","resolveValue","locals","expr","isArray","contextIsNonLatin1","some","$_","arr","reduce","prev","cur","placeable","resolveIdentifier","err","error","subPlaceable","interpolate","selector","selectorName","argValue","__plural","resolveSelector","hasOwnProperty","other","isNaN","Resolver","createEntry","attrs","keys","walkContent","fn","reAlphas","reVowels","reWords","reExcluded","Pseudo","charMap","modFn","translate","val","map","part","join","bind","charAt","charCodeAt","replaceChars","PSEUDO","fr-x-psaccent","toLowerCase","ar-x-psbidi","Locale","isReady","isPseudo","defaultLocale","qps","bindingsIO","extra","ver","path","errback","navigator","mozApps","getLocalizationResource","then","app","Context","isLoading","availableLocales","supportedLocales","resLinks","locales","_ready","Promise","once","reportMissing","getWithFallback","locale","getLocale","build","entry","formatTuple","formatValue","formatEntity","formatted","attrTuple","formatAsync","legacyGet","setReady","supported","self","l10nLoads","onL10nLoaded","idToFetch","appVersion","mozL10n","_config","localeSources","cb","decodeURI","onJSONLoaded","onPropLoaded","json","addAST","get","getEntity","code","registerLocales","defLocale","available","requestLocales","requested","supportedLocale","negotiate","concat","ready","setTimeout","callAndRemove","allowed","elements","attributes","global","a","area","input","menuitem","menu","optgroup","option","track","img","textarea","rtlList","nodeObserver","pendingElements","moConfig","characterData","childList","subtree","attributeFilter","ctxdata","translateFragment","fragment","_translateFragment","setAttributes","element","setAttribute","stringify","getAttributes","getAttribute","readyState","language","direction","isPretranslated","_getInternalAPI","translateDocument","onMetaInjected","buildLocaleList","readyStates","loading","interactive","complete","initObserver","MutationObserver","mutations","disconnect","mutation","targets","Set","addedNode","j","addedNodes","nodeType","Node","ELEMENT_NODE","add","forEach","childElementCount","hasAttribute","translateElement","observe","document","meta","extraLangs","getMatchingLangpack","langpacks","langpack","lp","defaultLanguage","availableLanguages","parseInt","revision","langs","splitAvailableLanguagesString","onScriptInjected","textContent","reOverlay","reHtml","htmlEntities","&","<",">","documentElement","dir","nodes","querySelectorAll","getTranslatableChildren","escapeL10nArgs","l10nId","string","l10nArgs","translation","ownerDocument","createElement","innerHTML","overlayElement","sourceElement","translationElement","result","createDocumentFragment","k","childElement","childNodes","removeChild","TEXT_NODE","getIndexOfType","sourceChild","getNthElementOfType","appendChild","tagName","createTextNode","sanitizedChild","nodeName","isAttrAllowed","content","attrName","context","child","nthOfType","children","previousElementSibling","URL","event","CustomEvent","bubbles","cancelable","detail","dispatchEvent","console","warn","toString","forcePretranslate","pretranslate","additionalLanguagesPromise","head","getAdditionalLanguages","catch","evt","languages","resolve","l10n_onrsc","l10n","frag","formatValues","resp","all","requestLanguages","pseudo","getName","processString","s"],"mappings":"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ACAC,IAAA,EACAC,GAAA,GACAC,GAAA,EACAC,IAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,GACAC,GAAA,EACA3H,GAAA,EACA4H,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,IAAA,EACAC,GAAA,EACAC,GAAA,EACAC,IAAA,EACAC,IAAA,EACAC,IAAA,EACAC,IAAA,EACAC,IAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,IAAA,EACAC,IAAA,GACAC,GAAA,EACAC,GAAA,EACAC,IAAA,GACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,GACAC,GAAA,EACAC,IAAA,EACAC,GAAA,EACAC,GAAA,GACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,GACAC,GAAA,EACAC,IAAA,EACAC,IAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,IAAA,EACAC,GAAA,EACAC,IAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,IAAA,EACAC,GAAA,GACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,IAAA,EACAC,GAAA,GACAC,IAAA,EACAC,IAAA,EACAC,IAAA,EACAC,GAAA,EACAC,IAAA,EACAC,IAAA,EACAC,GAAA,EACAC,GAAA,GACAC,IAAA,GACAC,GAAA,GACAC,GAAA,GACAC,IAAA,EACAC,IAAA,EACAC,IAAA,EACAC,IAAA,EACAC,IAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,GACAC,GAAA,EACAC,IAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,IAAA,EACAC,GAAA,EACAC,GAAA,EACAC,IAAA,EACAC,GAAA,EACAC,GAAA,EACAC,IAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,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","file":"static/js/2.d56b3b78.chunk.js","sourcesContent":["(function (window, undefined) {\n  'use strict';\n  /* jshint validthis:true */\n\n  function L10nError(message, id, loc) {\n    this.name = 'L10nError';\n    this.message = message;\n    this.id = id;\n    this.loc = loc;\n  }\n\n  L10nError.prototype = Object.create(Error.prototype);\n  L10nError.prototype.constructor = L10nError;\n  /* jshint browser:true */\n\n  var io = {\n    _load: function _load(type, url, callback, sync) {\n      var xhr = new XMLHttpRequest();\n      var needParse;\n\n      if (xhr.overrideMimeType) {\n        xhr.overrideMimeType(type);\n      }\n\n      xhr.open('GET', url, !sync);\n\n      if (type === 'application/json') {\n        //  Gecko 11.0+ forbids the use of the responseType attribute when\n        //  performing sync requests (NS_ERROR_DOM_INVALID_ACCESS_ERR).\n        //  We'll need to JSON.parse manually.\n        if (sync) {\n          needParse = true;\n        } else {\n          xhr.responseType = 'json';\n        }\n      }\n\n      xhr.addEventListener('load', function io_onload(e) {\n        if (e.target.status === 200 || e.target.status === 0) {\n          // Sinon.JS's FakeXHR doesn't have the response property\n          var res = e.target.response || e.target.responseText;\n          callback(null, needParse ? JSON.parse(res) : res);\n        } else {\n          callback(new L10nError('Not found: ' + url));\n        }\n      });\n      xhr.addEventListener('error', callback);\n      xhr.addEventListener('timeout', callback); // the app: protocol throws on 404, see https://bugzil.la/827243\n\n      try {\n        xhr.send(null);\n      } catch (e) {\n        if (e.name === 'NS_ERROR_FILE_NOT_FOUND') {\n          // the app: protocol throws on 404, see https://bugzil.la/827243\n          callback(new L10nError('Not found: ' + url));\n        } else {\n          throw e;\n        }\n      }\n    },\n    load: function load(url, callback, sync) {\n      return io._load('text/plain', url, callback, sync);\n    },\n    loadJSON: function loadJSON(url, callback, sync) {\n      return io._load('application/json', url, callback, sync);\n    }\n  };\n\n  function EventEmitter() {}\n\n  EventEmitter.prototype.emit = function ee_emit() {\n    if (!this._listeners) {\n      return;\n    }\n\n    var args = Array.prototype.slice.call(arguments);\n    var type = args.shift();\n\n    if (!this._listeners[type]) {\n      return;\n    }\n\n    var typeListeners = this._listeners[type].slice();\n\n    for (var i = 0; i < typeListeners.length; i++) {\n      typeListeners[i].apply(this, args);\n    }\n  };\n\n  EventEmitter.prototype.addEventListener = function ee_add(type, listener) {\n    if (!this._listeners) {\n      this._listeners = {};\n    }\n\n    if (!(type in this._listeners)) {\n      this._listeners[type] = [];\n    }\n\n    this._listeners[type].push(listener);\n  };\n\n  EventEmitter.prototype.removeEventListener = function ee_rm(type, listener) {\n    if (!this._listeners) {\n      return;\n    }\n\n    var typeListeners = this._listeners[type];\n    var pos = typeListeners.indexOf(listener);\n\n    if (pos === -1) {\n      return;\n    }\n\n    typeListeners.splice(pos, 1);\n  };\n\n  function getPluralRule(lang) {\n    var locales2rules = {\n      'af': 3,\n      'ak': 4,\n      'am': 4,\n      'ar': 1,\n      'asa': 3,\n      'az': 0,\n      'be': 11,\n      'bem': 3,\n      'bez': 3,\n      'bg': 3,\n      'bh': 4,\n      'bm': 0,\n      'bn': 3,\n      'bo': 0,\n      'br': 20,\n      'brx': 3,\n      'bs': 11,\n      'ca': 3,\n      'cgg': 3,\n      'chr': 3,\n      'cs': 12,\n      'cy': 17,\n      'da': 3,\n      'de': 3,\n      'dv': 3,\n      'dz': 0,\n      'ee': 3,\n      'el': 3,\n      'en': 3,\n      'eo': 3,\n      'es': 3,\n      'et': 3,\n      'eu': 3,\n      'fa': 0,\n      'ff': 5,\n      'fi': 3,\n      'fil': 4,\n      'fo': 3,\n      'fr': 5,\n      'fur': 3,\n      'fy': 3,\n      'ga': 8,\n      'gd': 24,\n      'gl': 3,\n      'gsw': 3,\n      'gu': 3,\n      'guw': 4,\n      'gv': 23,\n      'ha': 3,\n      'haw': 3,\n      'he': 2,\n      'hi': 4,\n      'hr': 11,\n      'hu': 0,\n      'id': 0,\n      'ig': 0,\n      'ii': 0,\n      'is': 3,\n      'it': 3,\n      'iu': 7,\n      'ja': 0,\n      'jmc': 3,\n      'jv': 0,\n      'ka': 0,\n      'kab': 5,\n      'kaj': 3,\n      'kcg': 3,\n      'kde': 0,\n      'kea': 0,\n      'kk': 3,\n      'kl': 3,\n      'km': 0,\n      'kn': 0,\n      'ko': 0,\n      'ksb': 3,\n      'ksh': 21,\n      'ku': 3,\n      'kw': 7,\n      'lag': 18,\n      'lb': 3,\n      'lg': 3,\n      'ln': 4,\n      'lo': 0,\n      'lt': 10,\n      'lv': 6,\n      'mas': 3,\n      'mg': 4,\n      'mk': 16,\n      'ml': 3,\n      'mn': 3,\n      'mo': 9,\n      'mr': 3,\n      'ms': 0,\n      'mt': 15,\n      'my': 0,\n      'nah': 3,\n      'naq': 7,\n      'nb': 3,\n      'nd': 3,\n      'ne': 3,\n      'nl': 3,\n      'nn': 3,\n      'no': 3,\n      'nr': 3,\n      'nso': 4,\n      'ny': 3,\n      'nyn': 3,\n      'om': 3,\n      'or': 3,\n      'pa': 3,\n      'pap': 3,\n      'pl': 13,\n      'ps': 3,\n      'pt': 3,\n      'rm': 3,\n      'ro': 9,\n      'rof': 3,\n      'ru': 11,\n      'rwk': 3,\n      'sah': 0,\n      'saq': 3,\n      'se': 7,\n      'seh': 3,\n      'ses': 0,\n      'sg': 0,\n      'sh': 11,\n      'shi': 19,\n      'sk': 12,\n      'sl': 14,\n      'sma': 7,\n      'smi': 7,\n      'smj': 7,\n      'smn': 7,\n      'sms': 7,\n      'sn': 3,\n      'so': 3,\n      'sq': 3,\n      'sr': 11,\n      'ss': 3,\n      'ssy': 3,\n      'st': 3,\n      'sv': 3,\n      'sw': 3,\n      'syr': 3,\n      'ta': 3,\n      'te': 3,\n      'teo': 3,\n      'th': 0,\n      'ti': 4,\n      'tig': 3,\n      'tk': 3,\n      'tl': 4,\n      'tn': 3,\n      'to': 0,\n      'tr': 0,\n      'ts': 3,\n      'tzm': 22,\n      'uk': 11,\n      'ur': 3,\n      've': 3,\n      'vi': 0,\n      'vun': 3,\n      'wa': 4,\n      'wae': 3,\n      'wo': 0,\n      'xh': 3,\n      'xog': 3,\n      'yo': 0,\n      'zh': 0,\n      'zu': 3\n    }; // utility functions for plural rules methods\n\n    function isIn(n, list) {\n      return list.indexOf(n) !== -1;\n    }\n\n    function isBetween(n, start, end) {\n      return typeof n === typeof start && start <= n && n <= end;\n    } // list of all plural rules methods:\n    // map an integer to the plural form name to use\n\n\n    var pluralRules = {\n      '0': function _() {\n        return 'other';\n      },\n      '1': function _(n) {\n        if (isBetween(n % 100, 3, 10)) {\n          return 'few';\n        }\n\n        if (n === 0) {\n          return 'zero';\n        }\n\n        if (isBetween(n % 100, 11, 99)) {\n          return 'many';\n        }\n\n        if (n === 2) {\n          return 'two';\n        }\n\n        if (n === 1) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '2': function _(n) {\n        if (n !== 0 && n % 10 === 0) {\n          return 'many';\n        }\n\n        if (n === 2) {\n          return 'two';\n        }\n\n        if (n === 1) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '3': function _(n) {\n        if (n === 1) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '4': function _(n) {\n        if (isBetween(n, 0, 1)) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '5': function _(n) {\n        if (isBetween(n, 0, 2) && n !== 2) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '6': function _(n) {\n        if (n === 0) {\n          return 'zero';\n        }\n\n        if (n % 10 === 1 && n % 100 !== 11) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '7': function _(n) {\n        if (n === 2) {\n          return 'two';\n        }\n\n        if (n === 1) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '8': function _(n) {\n        if (isBetween(n, 3, 6)) {\n          return 'few';\n        }\n\n        if (isBetween(n, 7, 10)) {\n          return 'many';\n        }\n\n        if (n === 2) {\n          return 'two';\n        }\n\n        if (n === 1) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '9': function _(n) {\n        if (n === 0 || n !== 1 && isBetween(n % 100, 1, 19)) {\n          return 'few';\n        }\n\n        if (n === 1) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '10': function _(n) {\n        if (isBetween(n % 10, 2, 9) && !isBetween(n % 100, 11, 19)) {\n          return 'few';\n        }\n\n        if (n % 10 === 1 && !isBetween(n % 100, 11, 19)) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '11': function _(n) {\n        if (isBetween(n % 10, 2, 4) && !isBetween(n % 100, 12, 14)) {\n          return 'few';\n        }\n\n        if (n % 10 === 0 || isBetween(n % 10, 5, 9) || isBetween(n % 100, 11, 14)) {\n          return 'many';\n        }\n\n        if (n % 10 === 1 && n % 100 !== 11) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '12': function _(n) {\n        if (isBetween(n, 2, 4)) {\n          return 'few';\n        }\n\n        if (n === 1) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '13': function _(n) {\n        if (isBetween(n % 10, 2, 4) && !isBetween(n % 100, 12, 14)) {\n          return 'few';\n        }\n\n        if (n !== 1 && isBetween(n % 10, 0, 1) || isBetween(n % 10, 5, 9) || isBetween(n % 100, 12, 14)) {\n          return 'many';\n        }\n\n        if (n === 1) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '14': function _(n) {\n        if (isBetween(n % 100, 3, 4)) {\n          return 'few';\n        }\n\n        if (n % 100 === 2) {\n          return 'two';\n        }\n\n        if (n % 100 === 1) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '15': function _(n) {\n        if (n === 0 || isBetween(n % 100, 2, 10)) {\n          return 'few';\n        }\n\n        if (isBetween(n % 100, 11, 19)) {\n          return 'many';\n        }\n\n        if (n === 1) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '16': function _(n) {\n        if (n % 10 === 1 && n !== 11) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '17': function _(n) {\n        if (n === 3) {\n          return 'few';\n        }\n\n        if (n === 0) {\n          return 'zero';\n        }\n\n        if (n === 6) {\n          return 'many';\n        }\n\n        if (n === 2) {\n          return 'two';\n        }\n\n        if (n === 1) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '18': function _(n) {\n        if (n === 0) {\n          return 'zero';\n        }\n\n        if (isBetween(n, 0, 2) && n !== 0 && n !== 2) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '19': function _(n) {\n        if (isBetween(n, 2, 10)) {\n          return 'few';\n        }\n\n        if (isBetween(n, 0, 1)) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '20': function _(n) {\n        if ((isBetween(n % 10, 3, 4) || n % 10 === 9) && !(isBetween(n % 100, 10, 19) || isBetween(n % 100, 70, 79) || isBetween(n % 100, 90, 99))) {\n          return 'few';\n        }\n\n        if (n % 1000000 === 0 && n !== 0) {\n          return 'many';\n        }\n\n        if (n % 10 === 2 && !isIn(n % 100, [12, 72, 92])) {\n          return 'two';\n        }\n\n        if (n % 10 === 1 && !isIn(n % 100, [11, 71, 91])) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '21': function _(n) {\n        if (n === 0) {\n          return 'zero';\n        }\n\n        if (n === 1) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '22': function _(n) {\n        if (isBetween(n, 0, 1) || isBetween(n, 11, 99)) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '23': function _(n) {\n        if (isBetween(n % 10, 1, 2) || n % 20 === 0) {\n          return 'one';\n        }\n\n        return 'other';\n      },\n      '24': function _(n) {\n        if (isBetween(n, 3, 10) || isBetween(n, 13, 19)) {\n          return 'few';\n        }\n\n        if (isIn(n, [2, 12])) {\n          return 'two';\n        }\n\n        if (isIn(n, [1, 11])) {\n          return 'one';\n        }\n\n        return 'other';\n      }\n    }; // return a function that gives the plural form name for a given integer\n\n    var index = locales2rules[lang.replace(/-.*$/, '')];\n\n    if (!(index in pluralRules)) {\n      return function () {\n        return 'other';\n      };\n    }\n\n    return pluralRules[index];\n  }\n\n  var MAX_PLACEABLES = 100;\n  var PropertiesParser = {\n    patterns: null,\n    entryIds: null,\n    init: function init() {\n      this.patterns = {\n        comment: /^\\s*#|^\\s*$/,\n        entity: /^([^=\\s]+)\\s*=\\s*(.*)$/,\n        multiline: /[^\\\\]\\\\$/,\n        index: /\\{\\[\\s*(\\w+)(?:\\(([^\\)]*)\\))?\\s*\\]\\}/i,\n        unicode: /\\\\u([0-9a-fA-F]{1,4})/g,\n        entries: /[^\\r\\n]+/g,\n        controlChars: /\\\\([\\\\\\n\\r\\t\\b\\f\\{\\}\\\"\\'])/g,\n        placeables: /\\{\\{\\s*([^\\s]*?)\\s*\\}\\}/\n      };\n    },\n    parse: function parse(ctx, source) {\n      if (!this.patterns) {\n        this.init();\n      }\n\n      var ast = [];\n      this.entryIds = Object.create(null);\n      var entries = source.match(this.patterns.entries);\n\n      if (!entries) {\n        return ast;\n      }\n\n      for (var i = 0; i < entries.length; i++) {\n        var line = entries[i];\n\n        if (this.patterns.comment.test(line)) {\n          continue;\n        }\n\n        while (this.patterns.multiline.test(line) && i < entries.length) {\n          line = line.slice(0, -1) + entries[++i].trim();\n        }\n\n        var entityMatch = line.match(this.patterns.entity);\n\n        if (entityMatch) {\n          try {\n            this.parseEntity(entityMatch[1], entityMatch[2], ast);\n          } catch (e) {\n            if (ctx) {\n              ctx._emitter.emit('parseerror', e);\n            } else {\n              throw e;\n            }\n          }\n        }\n      }\n\n      return ast;\n    },\n    parseEntity: function parseEntity(id, value, ast) {\n      var name, key;\n      var pos = id.indexOf('[');\n\n      if (pos !== -1) {\n        name = id.substr(0, pos);\n        key = id.substring(pos + 1, id.length - 1);\n      } else {\n        name = id;\n        key = null;\n      }\n\n      var nameElements = name.split('.');\n\n      if (nameElements.length > 2) {\n        throw new L10nError('Error in ID: \"' + name + '\".' + ' Nested attributes are not supported.');\n      }\n\n      var attr;\n\n      if (nameElements.length > 1) {\n        name = nameElements[0];\n        attr = nameElements[1];\n\n        if (attr[0] === '$') {\n          throw new L10nError('Attribute can\\'t start with \"$\"', id);\n        }\n      } else {\n        attr = null;\n      }\n\n      this.setEntityValue(name, attr, key, this.unescapeString(value), ast);\n    },\n    setEntityValue: function setEntityValue(id, attr, key, rawValue, ast) {\n      var pos, v;\n      var value = rawValue.indexOf('{{') > -1 ? this.parseString(rawValue) : rawValue;\n\n      if (attr) {\n        pos = this.entryIds[id];\n\n        if (pos === undefined) {\n          v = {\n            $i: id\n          };\n\n          if (key) {\n            v[attr] = {};\n            v[attr][key] = value;\n          } else {\n            v[attr] = value;\n          }\n\n          ast.push(v);\n          this.entryIds[id] = ast.length - 1;\n          return;\n        }\n\n        if (key) {\n          if (typeof ast[pos][attr] === 'string') {\n            ast[pos][attr] = {\n              $x: this.parseIndex(ast[pos][attr]),\n              $v: {}\n            };\n          }\n\n          ast[pos][attr].$v[key] = value;\n          return;\n        }\n\n        ast[pos][attr] = value;\n        return;\n      } // Hash value\n\n\n      if (key) {\n        pos = this.entryIds[id];\n\n        if (pos === undefined) {\n          v = {};\n          v[key] = value;\n          ast.push({\n            $i: id,\n            $v: v\n          });\n          this.entryIds[id] = ast.length - 1;\n          return;\n        }\n\n        if (typeof ast[pos].$v === 'string') {\n          ast[pos].$x = this.parseIndex(ast[pos].$v);\n          ast[pos].$v = {};\n        }\n\n        ast[pos].$v[key] = value;\n        return;\n      } // simple value\n\n\n      ast.push({\n        $i: id,\n        $v: value\n      });\n      this.entryIds[id] = ast.length - 1;\n    },\n    parseString: function parseString(str) {\n      var chunks = str.split(this.patterns.placeables);\n      var complexStr = [];\n      var len = chunks.length;\n      var placeablesCount = (len - 1) / 2;\n\n      if (placeablesCount >= MAX_PLACEABLES) {\n        throw new L10nError('Too many placeables (' + placeablesCount + ', max allowed is ' + MAX_PLACEABLES + ')');\n      }\n\n      for (var i = 0; i < chunks.length; i++) {\n        if (chunks[i].length === 0) {\n          continue;\n        }\n\n        if (i % 2 === 1) {\n          complexStr.push({\n            t: 'idOrVar',\n            v: chunks[i]\n          });\n        } else {\n          complexStr.push(chunks[i]);\n        }\n      }\n\n      return complexStr;\n    },\n    unescapeString: function unescapeString(str) {\n      if (str.lastIndexOf('\\\\') !== -1) {\n        str = str.replace(this.patterns.controlChars, '$1');\n      }\n\n      return str.replace(this.patterns.unicode, function (match, token) {\n        return unescape('%u' + '0000'.slice(token.length) + token);\n      });\n    },\n    parseIndex: function parseIndex(str) {\n      var match = str.match(this.patterns.index);\n\n      if (!match) {\n        throw new L10nError('Malformed index');\n      }\n\n      if (match[2]) {\n        return [{\n          t: 'idOrVar',\n          v: match[1]\n        }, match[2]];\n      } else {\n        return [{\n          t: 'idOrVar',\n          v: match[1]\n        }];\n      }\n    }\n  };\n  var KNOWN_MACROS = ['plural'];\n  var MAX_PLACEABLE_LENGTH = 2500;\n  var rePlaceables = /\\{\\{\\s*(.+?)\\s*\\}\\}/g; // Matches characters outside of the Latin-1 character set\n\n  var nonLatin1 = /[^\\x01-\\xFF]/; // Unicode bidi isolation characters\n\n  var FSI = \"\\u2068\";\n  var PDI = \"\\u2069\";\n\n  function createEntry(node, env) {\n    var keys = Object.keys(node); // the most common scenario: a simple string with no arguments\n\n    if (typeof node.$v === 'string' && keys.length === 2) {\n      return node.$v;\n    }\n\n    var attrs;\n    /* jshint -W084 */\n\n    for (var i = 0, key; key = keys[i]; i++) {\n      // skip $i (id), $v (value), $x (index)\n      if (key[0] === '$') {\n        continue;\n      }\n\n      if (!attrs) {\n        attrs = Object.create(null);\n      }\n\n      attrs[key] = createAttribute(node[key], env, node.$i + '.' + key);\n    }\n\n    return {\n      id: node.$i,\n      value: node.$v !== undefined ? node.$v : null,\n      index: node.$x || null,\n      attrs: attrs || null,\n      env: env,\n      // the dirty guard prevents cyclic or recursive references\n      dirty: false\n    };\n  }\n\n  function createAttribute(node, env, id) {\n    if (typeof node === 'string') {\n      return node;\n    }\n\n    return {\n      id: id,\n      value: node.$v || (node !== undefined ? node : null),\n      index: node.$x || null,\n      env: env,\n      dirty: false\n    };\n  }\n\n  function format(args, entity) {\n    if (typeof entity === 'string') {\n      return [{}, entity];\n    }\n\n    if (entity.dirty) {\n      throw new L10nError('Cyclic reference detected: ' + entity.id);\n    }\n\n    entity.dirty = true;\n    var rv; // if format fails, we want the exception to bubble up and stop the whole\n    // resolving process;  however, we still need to clean up the dirty flag\n\n    try {\n      rv = resolveValue({}, args, entity.env, entity.value, entity.index);\n    } finally {\n      entity.dirty = false;\n    }\n\n    return rv;\n  }\n\n  function resolveIdentifier(args, env, id) {\n    if (KNOWN_MACROS.indexOf(id) > -1) {\n      return [{}, env['__' + id]];\n    }\n\n    if (args && args.hasOwnProperty(id)) {\n      if (typeof args[id] === 'string' || typeof args[id] === 'number' && !isNaN(args[id])) {\n        return [{}, args[id]];\n      } else {\n        throw new L10nError('Arg must be a string or a number: ' + id);\n      }\n    } // XXX: special case for Node.js where still:\n    // '__proto__' in Object.create(null) => true\n\n\n    if (id in env && id !== '__proto__') {\n      return format(args, env[id]);\n    }\n\n    throw new L10nError('Unknown reference: ' + id);\n  }\n\n  function subPlaceable(locals, args, env, id) {\n    var res;\n\n    try {\n      res = resolveIdentifier(args, env, id);\n    } catch (err) {\n      return [{\n        error: err\n      }, '{{ ' + id + ' }}'];\n    }\n\n    var value = res[1];\n\n    if (typeof value === 'number') {\n      return res;\n    }\n\n    if (typeof value === 'string') {\n      // prevent Billion Laughs attacks\n      if (value.length >= MAX_PLACEABLE_LENGTH) {\n        throw new L10nError('Too many characters in placeable (' + value.length + ', max allowed is ' + MAX_PLACEABLE_LENGTH + ')');\n      }\n\n      if (locals.contextIsNonLatin1 || value.match(nonLatin1)) {\n        // When dealing with non-Latin-1 text\n        // we wrap substitutions in bidi isolate characters\n        // to avoid bidi issues.\n        res[1] = FSI + value + PDI;\n      }\n\n      return res;\n    }\n\n    return [{}, '{{ ' + id + ' }}'];\n  }\n\n  function interpolate(locals, args, env, arr) {\n    return arr.reduce(function (prev, cur) {\n      if (typeof cur === 'string') {\n        return [prev[0], prev[1] + cur];\n      } else if (cur.t === 'idOrVar') {\n        var placeable = subPlaceable(locals, args, env, cur.v);\n        return [prev[0], prev[1] + placeable[1]];\n      }\n    }, [locals, '']);\n  }\n\n  function resolveSelector(args, env, expr, index) {\n    var selectorName = index[0].v;\n    var selector = resolveIdentifier(args, env, selectorName)[1];\n\n    if (typeof selector !== 'function') {\n      // selector is a simple reference to an entity or args\n      return selector;\n    }\n\n    var argValue = index[1] ? resolveIdentifier(args, env, index[1])[1] : undefined;\n\n    if (selector === env.__plural) {\n      // special cases for zero, one, two if they are defined on the hash\n      if (argValue === 0 && 'zero' in expr) {\n        return 'zero';\n      }\n\n      if (argValue === 1 && 'one' in expr) {\n        return 'one';\n      }\n\n      if (argValue === 2 && 'two' in expr) {\n        return 'two';\n      }\n    }\n\n    return selector(argValue);\n  }\n\n  function resolveValue(locals, args, env, expr, index) {\n    if (!expr) {\n      return [locals, expr];\n    }\n\n    if (typeof expr === 'string' || typeof expr === 'boolean' || typeof expr === 'number') {\n      return [locals, expr];\n    }\n\n    if (Array.isArray(expr)) {\n      locals.contextIsNonLatin1 = expr.some(function ($_) {\n        return typeof $_ === 'string' && $_.match(nonLatin1);\n      });\n      return interpolate(locals, args, env, expr);\n    } // otherwise, it's a dict\n\n\n    if (index) {\n      // try to use the index in order to select the right dict member\n      var selector = resolveSelector(args, env, expr, index);\n\n      if (expr.hasOwnProperty(selector)) {\n        return resolveValue(locals, args, env, expr[selector]);\n      }\n    } // if there was no index or no selector was found, try 'other'\n\n\n    if ('other' in expr) {\n      return resolveValue(locals, args, env, expr.other);\n    } // XXX Specify entity id\n\n\n    throw new L10nError('Unresolvable value');\n  }\n\n  var Resolver = {\n    createEntry: createEntry,\n    format: format,\n    rePlaceables: rePlaceables\n  };\n  /* Utility functions */\n  // Recursively walk an AST node searching for content leaves\n\n  function walkContent(node, fn) {\n    if (typeof node === 'string') {\n      return fn(node);\n    }\n\n    if (node.t === 'idOrVar') {\n      return node;\n    }\n\n    var rv = Array.isArray(node) ? [] : {};\n    var keys = Object.keys(node);\n\n    for (var i = 0, key; key = keys[i]; i++) {\n      // don't change identifier ($i) nor indices ($x)\n      if (key === '$i' || key === '$x') {\n        rv[key] = node[key];\n      } else {\n        rv[key] = walkContent(node[key], fn);\n      }\n    }\n\n    return rv;\n  }\n  /* Pseudolocalizations\n   *\n   * PSEUDO is a dict of strategies to be used to modify the English\n   * context in order to create pseudolocalizations.  These can be used by\n   * developers to test the localizability of their code without having to\n   * actually speak a foreign language.\n   *\n   * Currently, the following pseudolocales are supported:\n   *\n   *   fr-x-psaccent -  \n   *\n   *     In Accented English all English letters are replaced by accented\n   *     Unicode counterparts which don't impair the readability of the content.\n   *     This allows developers to quickly test if any given string is being\n   *     correctly displayed in its 'translated' form.  Additionally, simple\n   *     heuristics are used to make certain words longer to better simulate the\n   *     experience of international users.\n   *\n   *   ar-x-psbidi - su p\n   *\n   *     Bidi English is a fake RTL locale.  All words are surrounded by\n   *     Unicode formatting marks forcing the RTL directionality of characters.\n   *     In addition, to make the reversed text easier to read, individual\n   *     letters are flipped.\n   *\n   *     Note: The name above is hardcoded to be RTL in case code editors have\n   *     trouble with the RLO and PDF Unicode marks.  In reality, it should be\n   *     surrounded by those marks as well.\n   *\n   * See https://bugzil.la/900182 for more information.\n   *\n   */\n\n\n  var reAlphas = /[a-zA-Z]/g;\n  var reVowels = /[aeiouAEIOU]/g; //  + [\\\\]^_` + \n\n  var ACCENTED_MAP = \"\\u0226\\u0181\\u0187\\u1E12\\u1E16\\u0191\\u0193\\u0126\\u012A\" + \"\\u0134\\u0136\\u013F\\u1E3E\\u0220\\u01FE\\u01A4\\u024A\\u0158\" + \"\\u015E\\u0166\\u016C\\u1E7C\\u1E86\\u1E8A\\u1E8E\\u1E90\" + '[\\\\]^_`' + \"\\u0227\\u0180\\u0188\\u1E13\\u1E17\\u0192\\u0260\\u0127\\u012B\" + \"\\u0135\\u0137\\u0140\\u1E3F\\u019E\\u01FF\\u01A5\\u024B\\u0159\" + \"\\u015F\\u0167\\u016D\\u1E7D\\u1E87\\u1E8B\\u1E8F\\u1E91\"; // XXX Until https://bugzil.la/1007340 is fixed,  don't render correctly\n  // on the devices.  For now, use the following replacements: p\n  // pHIWNOSXZ + [\\\\]_, + qpuodbsnxz\n\n  var FLIPPED_MAP = \"\\u2200\\u0510\\u2183p\\u018E\\u025F\\u05E4HI\\u017F\" + \"\\u04FC\\u02E5WNO\\u0500\\xD2\\u1D1AS\\u22A5\\u2229\\u0245\" + \"\\uFF2DX\\u028EZ\" + \"[\\\\]\\u1D65_,\" + \"\\u0250q\\u0254p\\u01DD\\u025F\\u0183\\u0265\\u0131\\u027E\" + \"\\u029E\\u0285\\u026Fuodb\\u0279s\\u0287n\\u028C\\u028Dx\\u028Ez\";\n\n  function makeLonger(val) {\n    return val.replace(reVowels, function (match) {\n      return match + match.toLowerCase();\n    });\n  }\n\n  function replaceChars(map, val) {\n    // Replace each Latin letter with a Unicode character from map\n    return val.replace(reAlphas, function (match) {\n      return map.charAt(match.charCodeAt(0) - 65);\n    });\n  }\n\n  var reWords = /[^\\W0-9_]+/g;\n\n  function makeRTL(val) {\n    // Surround each word with Unicode formatting codes, RLO and PDF:\n    //   U+202E:   RIGHT-TO-LEFT OVERRIDE (RLO)\n    //   U+202C:   POP DIRECTIONAL FORMATTING (PDF)\n    // See http://www.w3.org/International/questions/qa-bidi-controls\n    return val.replace(reWords, function (match) {\n      return \"\\u202E\" + match + \"\\u202C\";\n    });\n  } // strftime tokens (%a, %Eb), template {vars}, HTML entities (&#x202a;)\n  // and HTML tags.\n\n\n  var reExcluded = /(%[EO]?\\w|\\{\\s*.+?\\s*\\}|&[#\\w]+;|<\\s*.+?\\s*>)/;\n\n  function mapContent(fn, val) {\n    if (!val) {\n      return val;\n    }\n\n    var parts = val.split(reExcluded);\n    var modified = parts.map(function (part) {\n      if (reExcluded.test(part)) {\n        return part;\n      }\n\n      return fn(part);\n    });\n    return modified.join('');\n  }\n\n  function Pseudo(id, name, charMap, modFn) {\n    this.id = id;\n    this.translate = mapContent.bind(null, function (val) {\n      return replaceChars(charMap, modFn(val));\n    });\n    this.name = this.translate(name);\n  }\n\n  var PSEUDO = {\n    'fr-x-psaccent': new Pseudo('fr-x-psaccent', 'Runtime Accented', ACCENTED_MAP, makeLonger),\n    'ar-x-psbidi': new Pseudo('ar-x-psbidi', 'Runtime Bidi', FLIPPED_MAP, makeRTL)\n  };\n\n  function Locale(id, ctx) {\n    this.id = id;\n    this.ctx = ctx;\n    this.isReady = false;\n    this.entries = Object.create(null);\n    this.entries.__plural = getPluralRule(this.isPseudo() ? this.ctx.defaultLocale : id);\n  }\n\n  Locale.prototype.isPseudo = function () {\n    return this.ctx.qps.indexOf(this.id) !== -1;\n  };\n\n  var bindingsIO = {\n    extra: function extra(id, ver, path, type, callback, errback) {\n      if (type === 'properties') {\n        type = 'text';\n      }\n\n      navigator.mozApps.getLocalizationResource(id, ver, path, type).then(callback.bind(null, null), errback);\n    },\n    app: function app(id, ver, path, type, callback, errback, sync) {\n      switch (type) {\n        case 'properties':\n          io.load(path, callback, sync);\n          break;\n\n        case 'json':\n          io.loadJSON(path, callback, sync);\n          break;\n      }\n    }\n  };\n\n  Locale.prototype.build = function L_build(callback) {\n    var sync = !callback;\n    var ctx = this.ctx;\n    var self = this;\n    var l10nLoads = ctx.resLinks.length;\n\n    function onL10nLoaded(err) {\n      if (err) {\n        ctx._emitter.emit('fetcherror', err);\n      }\n\n      if (--l10nLoads <= 0) {\n        self.isReady = true;\n\n        if (callback) {\n          callback();\n        }\n      }\n    }\n\n    if (l10nLoads === 0) {\n      onL10nLoaded();\n      return;\n    }\n\n    function onJSONLoaded(err, json) {\n      if (!err && json) {\n        self.addAST(json);\n      }\n\n      onL10nLoaded(err);\n    }\n\n    function onPropLoaded(err, source) {\n      if (!err && source) {\n        var ast = PropertiesParser.parse(ctx, source);\n        self.addAST(ast);\n      }\n\n      onL10nLoaded(err);\n    }\n\n    var idToFetch = this.isPseudo() ? ctx.defaultLocale : this.id;\n    var appVersion = null;\n    var source = 'app';\n\n    if (typeof navigator !== 'undefined') {\n      source = navigator.mozL10n._config.localeSources[this.id] || 'app';\n      appVersion = navigator.mozL10n._config.appVersion;\n    }\n\n    for (var i = 0; i < ctx.resLinks.length; i++) {\n      var resLink = decodeURI(ctx.resLinks[i]);\n      var path = resLink.replace('{locale}', idToFetch);\n      var type = path.substr(path.lastIndexOf('.') + 1);\n      var cb;\n\n      switch (type) {\n        case 'json':\n          cb = onJSONLoaded;\n          break;\n\n        case 'properties':\n          cb = onPropLoaded;\n          break;\n      }\n\n      bindingsIO[source](this.id, appVersion, path, type, cb, onL10nLoaded, sync);\n    }\n  };\n\n  function createPseudoEntry(node, entries) {\n    return Resolver.createEntry(walkContent(node, PSEUDO[this.id].translate), entries);\n  }\n\n  Locale.prototype.addAST = function (ast) {\n    /* jshint -W084 */\n    var createEntry = this.isPseudo() ? createPseudoEntry.bind(this) : Resolver.createEntry;\n\n    for (var i = 0; i < ast.length; i++) {\n      this.entries[ast[i].$i] = createEntry(ast[i], this.entries);\n    }\n  };\n\n  function Context(id) {\n    this.id = id;\n    this.isReady = false;\n    this.isLoading = false;\n    this.defaultLocale = 'en-US';\n    this.availableLocales = [];\n    this.supportedLocales = [];\n    this.qps = [];\n    this.resLinks = [];\n    this.locales = {};\n    this._emitter = new EventEmitter();\n    this._ready = new Promise(this.once.bind(this));\n  } // Getting translations\n\n\n  function reportMissing(id, err) {\n    this._emitter.emit('notfounderror', err);\n\n    return id;\n  }\n\n  function getWithFallback(id) {\n    /* jshint -W084 */\n    var cur = 0;\n    var loc;\n    var locale;\n\n    while (loc = this.supportedLocales[cur]) {\n      locale = this.getLocale(loc);\n\n      if (!locale.isReady) {\n        // build without callback, synchronously\n        locale.build(null);\n      }\n\n      var entry = locale.entries[id];\n\n      if (entry === undefined) {\n        cur++;\n        reportMissing.call(this, id, new L10nError('\"' + id + '\"' + ' not found in ' + loc + ' in ' + this.id, id, loc));\n        continue;\n      }\n\n      return entry;\n    }\n\n    throw new L10nError('\"' + id + '\"' + ' missing from all supported locales in ' + this.id, id);\n  }\n\n  function formatTuple(args, entity) {\n    try {\n      return Resolver.format(args, entity);\n    } catch (err) {\n      this._emitter.emit('resolveerror', err);\n\n      var locals = {\n        error: err\n      };\n      return [locals, entity.id];\n    }\n  }\n\n  function formatValue(args, entity) {\n    if (typeof entity === 'string') {\n      return entity;\n    } // take the string value only\n\n\n    return formatTuple.call(this, args, entity)[1];\n  }\n\n  function formatEntity(args, entity) {\n    var entityTuple = formatTuple.call(this, args, entity);\n    var value = entityTuple[1];\n    var formatted = {\n      value: value,\n      attrs: null\n    };\n\n    if (entity.attrs) {\n      formatted.attrs = Object.create(null);\n    }\n\n    for (var key in entity.attrs) {\n      /* jshint -W089 */\n      var attrTuple = formatTuple.call(this, args, entity.attrs[key]);\n      formatted.attrs[key] = attrTuple[1];\n    }\n\n    return formatted;\n  }\n\n  function formatAsync(fn, id, args) {\n    return this._ready.then(getWithFallback.bind(this, id)).then(fn.bind(this, args), reportMissing.bind(this, id));\n  }\n\n  Context.prototype.formatValue = function (id, args) {\n    return formatAsync.call(this, formatValue, id, args);\n  };\n\n  Context.prototype.formatEntity = function (id, args) {\n    return formatAsync.call(this, formatEntity, id, args);\n  };\n\n  function legacyGet(fn, id, args) {\n    if (!this.isReady) {\n      throw new L10nError('Context not ready');\n    }\n\n    var entry;\n\n    try {\n      entry = getWithFallback.call(this, id);\n    } catch (err) {\n      // Don't handle notfounderrors in individual locales in any special way\n      if (err.loc) {\n        throw err;\n      } // For general notfounderrors, report them and return legacy fallback\n\n\n      reportMissing.call(this, id, err); // XXX legacy compat;  some Gaia code checks if returned value is falsy or\n      // an empty string to know if a translation is available;  this is bad and\n      // will be fixed eventually in https://bugzil.la/1020138\n\n      return '';\n    } // If translation is broken use regular fallback-on-id approach\n\n\n    return fn.call(this, args, entry);\n  }\n\n  Context.prototype.get = function (id, args) {\n    return legacyGet.call(this, formatValue, id, args);\n  };\n\n  Context.prototype.getEntity = function (id, args) {\n    return legacyGet.call(this, formatEntity, id, args);\n  };\n\n  Context.prototype.getLocale = function getLocale(code) {\n    /* jshint -W093 */\n    var locales = this.locales;\n\n    if (locales[code]) {\n      return locales[code];\n    }\n\n    return locales[code] = new Locale(code, this);\n  }; // Getting ready\n\n\n  function negotiate(available, requested, defaultLocale) {\n    var supportedLocale; // Find the first locale in the requested list that is supported.\n\n    for (var i = 0; i < requested.length; i++) {\n      var locale = requested[i];\n\n      if (available.indexOf(locale) !== -1) {\n        supportedLocale = locale;\n        break;\n      }\n    }\n\n    if (!supportedLocale || supportedLocale === defaultLocale) {\n      return [defaultLocale];\n    }\n\n    return [supportedLocale, defaultLocale];\n  }\n\n  function freeze(supported) {\n    var locale = this.getLocale(supported[0]);\n\n    if (locale.isReady) {\n      setReady.call(this, supported);\n    } else {\n      locale.build(setReady.bind(this, supported));\n    }\n  }\n\n  function setReady(supported) {\n    this.supportedLocales = supported;\n    this.isReady = true;\n\n    this._emitter.emit('ready');\n  }\n\n  Context.prototype.registerLocales = function (defLocale, available) {\n    if (defLocale) {\n      this.defaultLocale = defLocale;\n    }\n    /* jshint boss:true */\n\n\n    this.availableLocales = [this.defaultLocale];\n    this.qps = Object.keys(PSEUDO);\n\n    if (available) {\n      for (var i = 0, loc; loc = available[i]; i++) {\n        if (this.availableLocales.indexOf(loc) === -1) {\n          this.availableLocales.push(loc);\n          var pos = this.qps.indexOf(loc);\n\n          if (pos !== -1) {\n            // remove from this context's runtime pseudolocales\n            this.qps.splice(pos, 1);\n          }\n        }\n      }\n    }\n  };\n\n  Context.prototype.requestLocales = function requestLocales() {\n    if (this.isLoading && !this.isReady) {\n      throw new L10nError('Context not ready');\n    }\n\n    this.isLoading = true;\n    var requested = Array.prototype.slice.call(arguments);\n\n    if (requested.length === 0) {\n      throw new L10nError('No locales requested');\n    }\n\n    var supported = negotiate(this.availableLocales.concat(this.qps), requested, this.defaultLocale); // freeze only if the first language in the fallback chain is new\n\n    if (this.supportedLocales[0] !== supported[0]) {\n      freeze.call(this, supported);\n    }\n  }; // Events\n\n\n  Context.prototype.addEventListener = function (type, listener) {\n    this._emitter.addEventListener(type, listener);\n  };\n\n  Context.prototype.removeEventListener = function (type, listener) {\n    this._emitter.removeEventListener(type, listener);\n  };\n\n  Context.prototype.ready = function (callback) {\n    if (this.isReady) {\n      setTimeout(callback);\n    }\n\n    this.addEventListener('ready', callback);\n  };\n\n  Context.prototype.once = function (callback) {\n    /* jshint -W068 */\n    if (this.isReady) {\n      setTimeout(callback);\n      return;\n    }\n\n    var callAndRemove = function () {\n      this.removeEventListener('ready', callAndRemove);\n      callback();\n    }.bind(this);\n\n    this.addEventListener('ready', callAndRemove);\n  };\n\n  var allowed = {\n    elements: ['a', 'em', 'strong', 'small', 's', 'cite', 'q', 'dfn', 'abbr', 'data', 'time', 'code', 'var', 'samp', 'kbd', 'sub', 'sup', 'i', 'b', 'u', 'mark', 'ruby', 'rt', 'rp', 'bdi', 'bdo', 'span', 'br', 'wbr'],\n    attributes: {\n      global: ['title', 'aria-label', 'aria-valuetext', 'aria-moz-hint'],\n      a: ['download'],\n      area: ['download', 'alt'],\n      // value is special-cased in isAttrAllowed\n      input: ['alt', 'placeholder'],\n      menuitem: ['label'],\n      menu: ['label'],\n      optgroup: ['label'],\n      option: ['label'],\n      track: ['label'],\n      img: ['alt'],\n      textarea: ['placeholder'],\n      th: ['abbr']\n    }\n  };\n  var rtlList = ['ar', 'he', 'fa', 'ps', 'ar-x-psbidi', 'ur', 'ks'];\n  var nodeObserver = null;\n  var pendingElements = null;\n  var moConfig = {\n    attributes: true,\n    characterData: false,\n    childList: true,\n    subtree: true,\n    attributeFilter: ['data-l10n-id', 'data-l10n-args']\n  }; // Public API\n\n  navigator.mozL10n = {\n    ctx: null,\n    get: function get(id, ctxdata) {\n      return navigator.mozL10n.ctx.get(id, ctxdata);\n    },\n    formatValue: function formatValue(id, ctxdata) {\n      return navigator.mozL10n.ctx.formatValue(id, ctxdata);\n    },\n    formatEntity: function formatEntity(id, ctxdata) {\n      return navigator.mozL10n.ctx.formatEntity(id, ctxdata);\n    },\n    translateFragment: function translateFragment(fragment) {\n      return _translateFragment.call(navigator.mozL10n, fragment);\n    },\n    setAttributes: setL10nAttributes,\n    getAttributes: getL10nAttributes,\n    ready: function ready(callback) {\n      return navigator.mozL10n.ctx.ready(callback);\n    },\n    once: function once(callback) {\n      return navigator.mozL10n.ctx.once(callback);\n    },\n\n    get readyState() {\n      return navigator.mozL10n.ctx.isReady ? 'complete' : 'loading';\n    },\n\n    language: {\n      set code(lang) {\n        navigator.mozL10n.ctx.requestLocales(lang);\n      },\n\n      get code() {\n        return navigator.mozL10n.ctx.supportedLocales[0];\n      },\n\n      get direction() {\n        return getDirection(navigator.mozL10n.ctx.supportedLocales[0]);\n      }\n\n    },\n    qps: PSEUDO,\n    _config: {\n      appVersion: null,\n      localeSources: Object.create(null),\n      isPretranslated: false\n    },\n    _getInternalAPI: function _getInternalAPI() {\n      return {\n        Error: L10nError,\n        Context: Context,\n        Locale: Locale,\n        Resolver: Resolver,\n        getPluralRule: getPluralRule,\n        rePlaceables: rePlaceables,\n        translateDocument: translateDocument,\n        onMetaInjected: onMetaInjected,\n        PropertiesParser: PropertiesParser,\n        walkContent: walkContent,\n        buildLocaleList: buildLocaleList\n      };\n    }\n  };\n\n  function getDirection(lang) {\n    return rtlList.indexOf(lang) >= 0 ? 'rtl' : 'ltr';\n  }\n\n  var readyStates = {\n    loading: 0,\n    interactive: 1,\n    complete: 2\n  };\n\n  function whenInteractive(callback) {\n    if (readyStates[document.readyState] >= readyStates.interactive) {\n      callback();\n      return;\n    }\n\n    document.addEventListener('readystatechange', function l10n_onrsc() {\n      if (readyStates[document.readyState] >= readyStates.interactive) {\n        document.removeEventListener('readystatechange', l10n_onrsc);\n        callback();\n      }\n    });\n  }\n\n  function initObserver() {\n    nodeObserver = new MutationObserver(onMutations.bind(navigator.mozL10n));\n    nodeObserver.observe(document, moConfig);\n  }\n\n  function init(pretranslate) {\n    if (!pretranslate) {\n      // initialize MO early to collect nodes injected between now and when\n      // resources are loaded because we're not going to translate the whole\n      // document once l10n resources are ready\n      initObserver();\n    }\n\n    initResources.call(navigator.mozL10n);\n  }\n\n  function initResources() {\n    /* jshint boss:true */\n    var meta = {};\n    var nodes = document.head.querySelectorAll('link[rel=\"localization\"],' + 'meta[name=\"availableLanguages\"],' + 'meta[name=\"defaultLanguage\"],' + 'meta[name=\"appVersion\"],' + 'script[type=\"application/l10n\"]');\n\n    for (var i = 0, node; node = nodes[i]; i++) {\n      var type = node.getAttribute('rel') || node.nodeName.toLowerCase();\n\n      switch (type) {\n        case 'localization':\n          this.ctx.resLinks.push(node.getAttribute('href'));\n          break;\n\n        case 'meta':\n          onMetaInjected.call(this, node, meta);\n          break;\n\n        case 'script':\n          onScriptInjected.call(this, node);\n          break;\n      }\n    }\n\n    var additionalLanguagesPromise;\n\n    if (navigator.mozApps && navigator.mozApps.getAdditionalLanguages) {\n      // if the environment supports langpacks, register extra languages\n      additionalLanguagesPromise = navigator.mozApps.getAdditionalLanguages().catch(function (e) {\n        console.error('Error while loading getAdditionalLanguages', e);\n      }); // and listen to langpacks being added and removed\n\n      document.addEventListener('additionallanguageschange', function (evt) {\n        registerLocales.call(this, meta, evt.detail);\n        this.ctx.requestLocales.apply(this.ctx, navigator.languages || [navigator.language]);\n      }.bind(this));\n    } else {\n      additionalLanguagesPromise = Promise.resolve();\n    }\n\n    additionalLanguagesPromise.then(function (extraLangs) {\n      registerLocales.call(this, meta, extraLangs);\n      initLocale.call(this);\n    }.bind(this));\n  }\n\n  function registerLocales(meta, extraLangs) {\n    var locales = buildLocaleList.call(this, meta, extraLangs);\n    navigator.mozL10n._config.localeSources = locales[1];\n    this.ctx.registerLocales(locales[0], Object.keys(locales[1]));\n  }\n\n  function getMatchingLangpack(appVersion, langpacks) {\n    for (var i = 0, langpack; langpack = langpacks[i]; i++) {\n      if (langpack.target === appVersion) {\n        return langpack;\n      }\n    }\n\n    return null;\n  }\n\n  function buildLocaleList(meta, extraLangs) {\n    var loc, lp;\n    var localeSources = Object.create(null);\n    var defaultLocale = meta.defaultLanguage || this.ctx.defaultLocale;\n\n    if (meta.availableLanguages) {\n      for (loc in meta.availableLanguages) {\n        localeSources[loc] = 'app';\n      }\n    }\n\n    if (extraLangs) {\n      for (loc in extraLangs) {\n        lp = getMatchingLangpack(this._config.appVersion, extraLangs[loc]);\n\n        if (!lp) {\n          continue;\n        }\n\n        if (!(loc in localeSources) || !meta.availableLanguages[loc] || parseInt(lp.revision) > meta.availableLanguages[loc]) {\n          localeSources[loc] = 'extra';\n        }\n      }\n    }\n\n    if (!(defaultLocale in localeSources)) {\n      localeSources[defaultLocale] = 'app';\n    }\n\n    return [defaultLocale, localeSources];\n  }\n\n  function splitAvailableLanguagesString(str) {\n    var langs = {};\n    str.split(',').forEach(function (lang) {\n      // code:revision\n      lang = lang.trim().split(':'); // if revision is missing, use NaN\n\n      langs[lang[0]] = parseInt(lang[1]);\n    });\n    return langs;\n  }\n\n  function onMetaInjected(node, meta) {\n    switch (node.getAttribute('name')) {\n      case 'availableLanguages':\n        meta.availableLanguages = splitAvailableLanguagesString(node.getAttribute('content'));\n        break;\n\n      case 'defaultLanguage':\n        meta.defaultLanguage = node.getAttribute('content');\n        break;\n\n      case 'appVersion':\n        navigator.mozL10n._config.appVersion = node.getAttribute('content');\n        break;\n    }\n  }\n\n  function onScriptInjected(node) {\n    var lang = node.getAttribute('lang');\n    var locale = this.ctx.getLocale(lang);\n    locale.addAST(JSON.parse(node.textContent));\n  }\n\n  function initLocale() {\n    this.ctx.requestLocales.apply(this.ctx, navigator.languages || [navigator.language]);\n    window.addEventListener('languagechange', function l10n_langchange() {\n      this.ctx.requestLocales.apply(this.ctx, navigator.languages || [navigator.language]);\n    }.bind(this));\n  }\n\n  function localizeMutations(mutations) {\n    var mutation;\n    var targets = new Set();\n\n    for (var i = 0; i < mutations.length; i++) {\n      mutation = mutations[i];\n\n      if (mutation.type === 'childList') {\n        var addedNode;\n\n        for (var j = 0; j < mutation.addedNodes.length; j++) {\n          addedNode = mutation.addedNodes[j];\n\n          if (addedNode.nodeType !== Node.ELEMENT_NODE) {\n            continue;\n          }\n\n          targets.add(addedNode);\n        }\n      }\n\n      if (mutation.type === 'attributes') {\n        targets.add(mutation.target);\n      }\n    }\n\n    targets.forEach(function (target) {\n      if (target.childElementCount) {\n        _translateFragment.call(this, target);\n      } else if (target.hasAttribute('data-l10n-id')) {\n        translateElement.call(this, target);\n      }\n    }, this);\n  }\n\n  function onMutations(mutations, self) {\n    self.disconnect();\n    localizeMutations.call(this, mutations);\n    self.observe(document, moConfig);\n  }\n\n  function onReady() {\n    if (!navigator.mozL10n._config.isPretranslated) {\n      translateDocument.call(this);\n    }\n\n    navigator.mozL10n._config.isPretranslated = false;\n\n    if (pendingElements) {\n      /* jshint boss:true */\n      for (var i = 0, element; element = pendingElements[i]; i++) {\n        translateElement.call(this, element);\n      }\n\n      pendingElements = null;\n    }\n\n    if (!nodeObserver) {\n      initObserver();\n    }\n\n    fireLocalizedEvent.call(this);\n  }\n\n  function fireLocalizedEvent() {\n    var event = new CustomEvent('localized', {\n      'bubbles': false,\n      'cancelable': false,\n      'detail': {\n        'language': this.ctx.supportedLocales[0]\n      }\n    });\n    window.dispatchEvent(event);\n  } // match the opening angle bracket (<) in HTML tags, and HTML entities like\n  // &amp;, &#0038;, &#x0026;.\n\n\n  var reOverlay = /<|&#?\\w+;/;\n  var reHtml = /[&<>]/g;\n  var htmlEntities = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n  };\n\n  function translateDocument() {\n    document.documentElement.lang = this.language.code;\n    document.documentElement.dir = this.language.direction;\n\n    _translateFragment.call(this, document.documentElement);\n  }\n\n  function _translateFragment(element) {\n    if (typeof element.hasAttribute === 'function' && element.hasAttribute('data-l10n-id')) {\n      translateElement.call(this, element);\n    }\n\n    var nodes = getTranslatableChildren(element);\n\n    for (var i = 0; i < nodes.length; i++) {\n      translateElement.call(this, nodes[i]);\n    }\n  }\n\n  function setL10nAttributes(element, id, args) {\n    element.setAttribute('data-l10n-id', id);\n\n    if (args) {\n      element.setAttribute('data-l10n-args', JSON.stringify(args));\n    }\n  }\n\n  function getL10nAttributes(element) {\n    return {\n      id: element.getAttribute('data-l10n-id'),\n      args: JSON.parse(element.getAttribute('data-l10n-args'))\n    };\n  }\n\n  function getTranslatableChildren(element) {\n    return element ? element.querySelectorAll('*[data-l10n-id]') : [];\n  }\n\n  function camelCaseToDashed(string) {\n    // XXX workaround for https://bugzil.la/1141934\n    if (string === 'ariaValueText') {\n      return 'aria-valuetext';\n    }\n\n    return string.replace(/[A-Z]/g, function (match) {\n      return '-' + match.toLowerCase();\n    }).replace(/^-/, '');\n  }\n\n  function escapeL10nArgs(match) {\n    return htmlEntities[match];\n  }\n\n  function translateElement(element) {\n    if (!this.ctx.isReady) {\n      if (!pendingElements) {\n        pendingElements = [];\n      }\n\n      pendingElements.push(element);\n      return;\n    }\n\n    var l10nId = element.getAttribute('data-l10n-id');\n\n    if (!l10nId) {\n      return false;\n    }\n\n    var l10nArgs = element.getAttribute('data-l10n-args');\n    var entity = this.ctx.getEntity(l10nId, l10nArgs ? JSON.parse(l10nArgs.replace(reHtml, escapeL10nArgs)) : undefined);\n    var value = entity.value;\n\n    if (typeof value === 'string') {\n      if (!reOverlay.test(value)) {\n        element.textContent = value;\n      } else {\n        // start with an inert template element and move its children into\n        // `element` but such that `element`'s own children are not replaced\n        var translation = element.ownerDocument.createElement('template');\n        translation.innerHTML = value; // overlay the node with the DocumentFragment\n\n        overlayElement(element, translation.content);\n      }\n    }\n\n    for (var key in entity.attrs) {\n      var attrName = camelCaseToDashed(key);\n\n      if (isAttrAllowed({\n        name: attrName\n      }, element)) {\n        element.setAttribute(attrName, entity.attrs[key]);\n      }\n    }\n  } // The goal of overlayElement is to move the children of `translationElement`\n  // into `sourceElement` such that `sourceElement`'s own children are not\n  // replaced, but onle have their text nodes and their attributes modified.\n  //\n  // We want to make it possible for localizers to apply text-level semantics to\n  // the translations and make use of HTML entities. At the same time, we\n  // don't trust translations so we need to filter unsafe elements and\n  // attribtues out and we don't want to break the Web by replacing elements to\n  // which third-party code might have created references (e.g. two-way\n  // bindings in MVC frameworks).\n\n\n  function overlayElement(sourceElement, translationElement) {\n    var result = translationElement.ownerDocument.createDocumentFragment();\n    var k, attr; // take one node from translationElement at a time and check it against\n    // the allowed list or try to match it with a corresponding element\n    // in the source\n\n    var childElement;\n\n    while (childElement = translationElement.childNodes[0]) {\n      translationElement.removeChild(childElement);\n\n      if (childElement.nodeType === Node.TEXT_NODE) {\n        result.appendChild(childElement);\n        continue;\n      }\n\n      var index = getIndexOfType(childElement);\n      var sourceChild = getNthElementOfType(sourceElement, childElement, index);\n\n      if (sourceChild) {\n        // there is a corresponding element in the source, let's use it\n        overlayElement(sourceChild, childElement);\n        result.appendChild(sourceChild);\n        continue;\n      }\n\n      if (isElementAllowed(childElement)) {\n        var sanitizedChild = childElement.ownerDocument.createElement(childElement.nodeName);\n        overlayElement(sanitizedChild, childElement);\n        result.appendChild(sanitizedChild);\n        continue;\n      } // otherwise just take this child's textContent\n\n\n      result.appendChild(document.createTextNode(childElement.textContent));\n    } // clear `sourceElement` and append `result` which by this time contains\n    // `sourceElement`'s original children, overlayed with translation\n\n\n    sourceElement.textContent = '';\n    sourceElement.appendChild(result); // if we're overlaying a nested element, translate the allowed\n    // attributes; top-level attributes are handled in `translateElement`\n    // XXX attributes previously set here for another language should be\n    // cleared if a new language doesn't use them; https://bugzil.la/922577\n\n    if (translationElement.attributes) {\n      for (k = 0, attr; attr = translationElement.attributes[k]; k++) {\n        if (isAttrAllowed(attr, sourceElement)) {\n          sourceElement.setAttribute(attr.name, attr.value);\n        }\n      }\n    }\n  } // XXX the allowed list should be amendable; https://bugzil.la/922573\n\n\n  function isElementAllowed(element) {\n    return allowed.elements.indexOf(element.tagName.toLowerCase()) !== -1;\n  }\n\n  function isAttrAllowed(attr, element) {\n    var attrName = attr.name.toLowerCase();\n    var tagName = element.tagName.toLowerCase(); // is it a globally safe attribute?\n\n    if (allowed.attributes.global.indexOf(attrName) !== -1) {\n      return true;\n    } // are there no allowed attributes for this element?\n\n\n    if (!allowed.attributes[tagName]) {\n      return false;\n    } // is it allowed on this element?\n    // XXX the allowed list should be amendable; https://bugzil.la/922573\n\n\n    if (allowed.attributes[tagName].indexOf(attrName) !== -1) {\n      return true;\n    } // special case for value on inputs with type button, reset, submit\n\n\n    if (tagName === 'input' && attrName === 'value') {\n      var type = element.type.toLowerCase();\n\n      if (type === 'submit' || type === 'button' || type === 'reset') {\n        return true;\n      }\n    }\n\n    return false;\n  } // Get n-th immediate child of context that is of the same type as element.\n  // XXX Use querySelector(':scope > ELEMENT:nth-of-type(index)'), when:\n  // 1) :scope is widely supported in more browsers and 2) it works with\n  // DocumentFragments.\n\n\n  function getNthElementOfType(context, element, index) {\n    /* jshint boss:true */\n    var nthOfType = 0;\n\n    for (var i = 0, child; child = context.children[i]; i++) {\n      if (child.nodeType === Node.ELEMENT_NODE && child.tagName === element.tagName) {\n        if (nthOfType === index) {\n          return child;\n        }\n\n        nthOfType++;\n      }\n    }\n\n    return null;\n  } // Get the index of the element among siblings of the same type.\n\n\n  function getIndexOfType(element) {\n    var index = 0;\n    var child;\n\n    while (child = element.previousElementSibling) {\n      if (child.tagName === element.tagName) {\n        index++;\n      }\n    }\n\n    return index;\n  }\n\n  var DEBUG = false;\n  navigator.mozL10n.ctx = new Context(window.document ? document.URL : null);\n  navigator.mozL10n.ctx.ready(onReady.bind(navigator.mozL10n));\n  navigator.mozL10n.ctx.addEventListener('notfounderror', function reportMissingEntity(e) {\n    if (DEBUG || e.loc === 'en-US') {\n      console.warn(e.toString());\n    }\n  });\n\n  if (DEBUG) {\n    navigator.mozL10n.ctx.addEventListener('fetcherror', console.error.bind(console));\n    navigator.mozL10n.ctx.addEventListener('parseerror', console.error.bind(console));\n    navigator.mozL10n.ctx.addEventListener('resolveerror', console.error.bind(console));\n  }\n\n  if (window.document) {\n    navigator.mozL10n._config.isPretranslated = document.documentElement.lang === navigator.language;\n    var forcePretranslate = !navigator.mozL10n._config.isPretranslated;\n    whenInteractive(init.bind(navigator.mozL10n, forcePretranslate));\n  }\n\n  document.l10n = {\n    setAttributes: navigator.mozL10n.setAttributes,\n    getAttributes: navigator.mozL10n.getAttributes,\n    formatValue: function formatValue(id, args) {\n      return navigator.mozL10n.formatValue(id, args);\n    },\n    translateFragment: function translateFragment(frag) {\n      return Promise.resolve(navigator.mozL10n.translateFragment(frag));\n    },\n    ready: new Promise(function (resolve) {\n      navigator.mozL10n.once(resolve);\n    }),\n    formatValues: function formatValues() {\n      var keys = arguments;\n      var resp = keys.map(function (key) {\n        if (Array.isArray(key)) {\n          return navigator.mozL10n.formatValue(key[0], key[1]);\n        }\n\n        return navigator.mozL10n.formatValue(key);\n      });\n      return Promise.all(resp);\n    },\n    requestLanguages: function requestLanguages(langs) {\n      // XXX real l20n returns a promise\n      navigator.mozL10n.ctx.requestLocales.apply(navigator.mozL10n.ctx, langs);\n    },\n\n    get pseudo() {\n      var result = {};\n      /*jshint -W083 */\n\n      for (var code in navigator.mozL10n.qps) {\n        result[code] = {\n          getName: function getName() {\n            return Promise.resolve(navigator.mozL10n.qps[code].name);\n          },\n          processString: function processString(s) {\n            return Promise.resolve(navigator.mozL10n.qps[code].translate(s));\n          }\n        };\n      }\n\n      return result;\n    }\n\n  };\n  navigator.mozL10n.ready(function () {\n    document.documentElement.setAttribute('langs', navigator.mozL10n.ctx.supportedLocales.join(' '));\n  });\n  navigator.mozL10n.once(function () {\n    window.addEventListener('localized', function () {\n      document.dispatchEvent(new CustomEvent('DOMRetranslated', {\n        bubbles: false,\n        cancelable: false\n      }));\n    });\n  });\n})(window);"],"sourceRoot":""}